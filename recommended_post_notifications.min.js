// Name: Blogger Recommended Post Notifications
// Author: Việt Designer
// Website: www.thietkeblogspot.com
if("undefined"!=typeof jQuery&&document.getElementById("recommended_settings")){if([recommended_posts.visible,recommended_posts.view.isHomepage,recommended_posts.view.isArchive,recommended_posts.view.isPost,recommended_posts.view.isPage,recommended_posts.view.isLabelSearch,recommended_posts.view.isSearchUrl,recommended_posts.view.isSearch,recommended_posts.view.isMobile].includes("true")&&[recommended_posts.visible,recommended_posts.view.isHomepage,recommended_posts.view.isArchive,recommended_posts.view.isPost,recommended_posts.view.isPage,recommended_posts.view.isLabelSearch,recommended_posts.view.isSearchUrl,recommended_posts.view.isSearch,recommended_posts.view.isMobile].includes("false"))if("true"==recommended_posts.visible){var $total=0,$results=0,get_seconds=0,start_timer=null,timeout=null;if(""==recommended_posts.catename)var url="/feeds/posts/default"}else url="/feeds/posts/default/-/"+recommended_posts.catename;else alert("Bạn phải cài đặt giá trị true hoặc false");if("true"!=localStorage.getItem("dis_rec_noti_")){function getrec_(){function e(){$results++,$total=Number($("body").attr("data-total-posts"));for(var e=[],t=[],o=0;o<$total;o++)e.push(o+1);$.ajax({type:"GET",url:url,data:{alt:"json","start-index":function e(s){var o=s[Math.floor(Math.random()*s.length)];return function(e,s){for(var t=0;t<e.length;t++)return e[t]==s}(t,o)?e(s):(t.push(o),o)}(e),"max-results":1},dataType:"jsonp",success:function(e){if(e.feed.entry)for(var t=0;t<e.feed.entry.length;t++){for(var o=e.feed.entry[t],r=0;r<o.link.length;r++)if("alternate"==o.link[r].rel){var i=o.link[r].href;break}var a=o.title.$t;if("media$thumbnail"in o)var c=o.media$thumbnail.url.replace("s72-c","s50-c");else{var d=o.content.$t,n=d.indexOf("<img"),m=d.indexOf('src="',n),l=d.indexOf('"',m+5),p=d.substr(m+5,l-m-5);c=-1!=n&&-1!=m&&-1!=l&&""!=p?p:thumbnail_url}if("category"in o)var u=o.category[0].term;if(i!=$('link[rel="canonical"]').attr("href")){if("right"==recommended_posts.show)var v='<div class="notifications--wrapper right hide"><div class="article--body"><div class="turn--off"><span class="settings"></span></div><div class="flex align-center"><div class="article--img"><img alt="'+a+'" src='+c+'></div><div class="article--content">'+recommended_posts.messages.title+" <a href="+i+' title="'+a+'"><strong>'+a+"</strong></a> "+recommended_posts.messages.label+" <strong>"+u+"</strong></div></div></div></div>";else"left"==recommended_posts.show?v='<div class="notifications--wrapper left hide"><div class="article--body"><div class="turn--off"><span class="settings"></span></div><div class="flex align-center"><div class="article--img"><img alt="'+a+'" src='+c+'></div><div class="article--content">'+recommended_posts.messages.title+" <a href="+i+' title="'+a+'"><strong>'+a+"</strong></a> "+recommended_posts.messages.label+" <strong>"+u+"</strong></div></div></div></div>":(alert("Bạn phải cài đặt giá trị left hoặc right"),location.reload());var _='<div id="modal--confirm"><form class="modal--dialog"><div class="_3em"></div><div class="modal--content"><div class="modal--header"><p>'+recommended_posts.messages.confirm+'</p></div><div class="modal--body"><div class="accept--check"><label for="for_accept"><input id="for_accept" name="accept_calcel" required="" type="radio" value="'+recommended_posts.messages.accept+'">'+recommended_posts.messages.accept+'</label></div><div class="calcel--check"><label for="for_calcel"><input id="for_calcel" name="accept_calcel" required="" type="radio" value="'+recommended_posts.messages.cancel+'">'+recommended_posts.messages.cancel+'</label></div></div><div class="modal--footer"><button type="submit">'+recommended_posts.messages.button+'</button></div></div><div class="_3em"></div></form></div>'}function f(){$(".notifications--wrapper").removeClass("hide")}function g(){$(".notifications--wrapper").addClass("hide"),setTimeout(function(){$(".notifications--wrapper").remove()},500)}function h(){timeout=setTimeout(g,get_seconds)}$(v).appendTo("body"),timeout=setTimeout(f,500),h(),$(".notifications--wrapper .turn--off").on({mouseover:function(){clearInterval(start_timer),clearTimeout(timeout)},mouseleave:function(){h(),s()},click:function(){$(_).appendTo("body"),$("#modal--confirm").addClass("show"),$(this).unbind("mouseleave"),$(".modal--content button").click(function(e){e.preventDefault();var t=$('.modal--content input[type="radio"]').filter(":checked").attr("value");t==recommended_posts.messages.accept?($(".modal--body").html("<div><p>"+recommended_posts.messages.success+"</p><p>"+recommended_posts.messages.close+" "+recommended_posts.seconds+" "+recommended_posts.messages.seconds+"</p></div>"),setTimeout(function(){$("#modal--confirm").remove()},get_seconds),localStorage.setItem("dis_rec_noti_","true"),g()):t==recommended_posts.messages.cancel&&($("#modal--confirm").remove(),h(),s())})}})}}}),$results<=$total&&$results>=recommended_posts.limit&&clearInterval(start_timer)}function s(){start_timer=setInterval(e,2*get_seconds)}$.ajax({type:"GET",url:url,data:{alt:"json","max-results":0},dataType:"jsonp",success:function(e){e.feed&&($total=Number(e.feed.openSearch$totalResults.$t),$("body").attr("data-total-posts",$total))}}),s()}get_seconds=1e3*recommended_posts.seconds,"true"==isMobile&&"true"==recommended_posts.view.isMobile&&("true"==isHomepage&&"true"==recommended_posts.view.isHomepage&&getrec_(),"true"==isArchive&&"true"==recommended_posts.view.isArchive&&getrec_(),"true"==isPost&&"true"==recommended_posts.view.isPost&&getrec_(),"true"==isPage&&"true"==recommended_posts.view.isPage&&getrec_(),"true"==isLabelSearch&&"true"==recommended_posts.view.isLabelSearch&&getrec_(),"true"==isSearchUrl&&"true"==recommended_posts.view.isSearchUrl&&getrec_(),"true"==isSearch&&"true"==recommended_posts.view.isSearch&&getrec_()),""==isMobile&&("true"==isHomepage&&"true"==recommended_posts.view.isHomepage&&getrec_(),"true"==isArchive&&"true"==recommended_posts.view.isArchive&&getrec_(),"true"==isPost&&"true"==recommended_posts.view.isPost&&getrec_(),"true"==isPage&&"true"==recommended_posts.view.isPage&&getrec_(),"true"==isLabelSearch&&"true"==recommended_posts.view.isLabelSearch&&getrec_(),"true"==isSearchUrl&&"true"==recommended_posts.view.isSearchUrl&&getrec_(),"true"==isSearch&&"true"==recommended_posts.view.isSearch&&getrec_())}}
